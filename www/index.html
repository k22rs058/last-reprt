<!DOCTYPE HTML>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta http-equiv="Content-Security-Policy" content="default-src * data: gap: content: https://ssl.gstatic.com; style-src * 'unsafe-inline'; script-src * 'unsafe-inline' 'unsafe-eval'">
    <script src="components/loader.js"></script>
    <link rel="stylesheet" href="components/loader.css">
    <link rel="stylesheet" href="css/style.css">
    <script src="keys.js"></script>
    <script>
        let ncmb = new NCMB(appKey, clientKey);
        // 利用するデータベースを指定（存在しなければ生成）
        let TestClass = ncmb.DataStore("RegisterTest2021");
        // コールバックの登録など
        function fetchall() {
            // 登録するレコードを用意
            let TestDataclass = ncmb.DataStore(db);
            TestDataclass.order("name",false).fetchall()
            .then(function(results){
                showResults(results);
            })
            
        }
        function showResults(results) {
            // テーブルのヘッダを生成
            let msg = "<table><tr><th>Number</th><th>name</th><th>Attack</th><th>SDfence</th><th>Hit Point</th><th>SAtaack</th><th>Defence</th><th>Speed</th></tr>";
            for (let i = 0; i < results.length; i++) {
                msg += "<tr>";
                msg += "<td>" + results[i].name + "</td>";
                msg += "<td class='num'>" + results[i].Attack + "</td>";
                msg += "<td class='num'>" + results[i].SDefence + "</td>";
                msg += "<td class='num'>" + results[i].SAtaack + "</td>";
                msg += "<td class='num'>" + results[i].Defence + "</td>";
                msg += "<td class='num'>" + results[i].Speed + "</td>";
                msg += "<td class='num'>" + results[i].Number + "</td>";
                msg += "<td class='num'>" + results[i].HitPoint + "</td>";
                msg += "</tr>";
                }
                // テーブルのテイラを生成
                msg += "</table>";
                $("#message").html(msg);
        }
        function btnn(){
            let name=$("#name").val();
            let TestDataClass = ncmb.DataStore(db);TestDataClass.equalTo("name", name).fetchAll()
            .then(function(results){
                showResults(results);
                })
        }
        function btnN(){
            let level=parseInt($("#level").val());
            let TestDataClass = ncmb.DataStore(db);TestDataClass.equalTo("Number", Number).fetchAll()
            .then(function(results){
                showResults(results);
                })
        }

    </script>
</head>
<body>
    <h1>In what order <br> Poke'mon <br> No.1 to No.151</h1>
    <div id="button">
        <button onclick ="btnA" class="btn" >Attack</button>
        <button onclick ="btnB" class="btn" >SDefence</button>
        <button onclick ="btnF" class="btn" >Hit point</button>
        <button onclick ="btnD" class="btn" >SAttack</button>
        <button onclick ="btnC" class="btn" >Defence</button>
        <button onclick ="btnE" class="btn" >Speed</button>
        <button onclick ="btnN" class="btn" >Number</button>
        <button onclick ="btnn" class="btn" >Name</button>
        <button onclick ="fetchall" class="btn" >FetchAll</button>
    </div>
    <div id="message">That poke'mon is‥‥‥</div>

</body>
</html>
